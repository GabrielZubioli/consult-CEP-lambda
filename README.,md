# Deploy automático Lambda via GitHub Actions

Este projeto contém uma função Lambda em Node.js para consultar CEPs e um workflow GitHub Actions para deploy automático.

## Como funciona

- O código da função Lambda está na pasta src do projeto (`index.mjs`).
- Toda vez que você fizer push no branch `main`, o GitHub Actions executa o workflow que:
  - Faz checkout do código.
  - Configura as credenciais AWS usando Secrets.
  - Compacta o código em um arquivo zip.
  - Atualiza a função Lambda na AWS com o novo código.

## Configuração necessária

1. Criar um usuário IAM na AWS com permissão `AWSLambdaFullAccess`.
2. Criar duas chaves de acesso para esse usuário (Access Key ID e Secret Access Key).
3. No repositório GitHub, adicionar dois **Secrets**:
   - `AWS_ACCESS_KEY_ID`: sua Access Key ID da AWS.
   - `AWS_SECRET_ACCESS_KEY`: sua Secret Access Key da AWS.
4. Verificar se o nome da função Lambda no workflow (`consultCEP`) está correto.
5. Ajustar a região AWS no workflow (ex: `us-east-2`).

## Como usar

- Faça alterações no arquivo `index.mjs`.
- Commit e push para o branch `main`.
- Aguarde o workflow executar o deploy automático.

## Testes

- Após o deploy, teste a função Lambda na AWS Console com um evento JSON:

```json
## Entrada esperada:

{
  "cep": "01001000"
}

## Saida Esperada:

{
  "logradouro": "Praça da Sé",
  "bairro": "Sé",
  "cidade": "São Paulo",
  "estado": "SP"
}

## Em caso de erro (CEP inválido ou não encontrado), a resposta terá o formato:

{
  "error": "Mensagem de erro explicativa"
}
